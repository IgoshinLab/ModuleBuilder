(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{14:function(e,t,a){},18:function(e,t,a){e.exports=a(30)},23:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),s=a.n(l),c=(a(14),a(2)),m=a(3),p=a(5),u=a(4),i=a(1),o=(a(23),a(6)),h=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t={username:n.state.username,password:n.state.password};n.props.handleSubmit("LOGIN",t)},n.presentParams=function(e,t){return"sequential"===e.type?r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Order"),r.a.createElement("th",null,"Type"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Parameters"),r.a.createElement("th",null,"Edit"),r.a.createElement("th",null,"Delete")),Object.keys(e.params).map((function(a){return r.a.createElement("tr",null,r.a.createElement("th",null,a),r.a.createElement("th",null,e.params[a].type),r.a.createElement("th",null,e.params[a].name),r.a.createElement("th",{className:"left_align"},n.presentParams(e.params[a],t.concat(a))),r.a.createElement("th",null,r.a.createElement("button",{type:"button",onClick:n.handleManipulate("EDIT",t.concat(a))},"Edit")),r.a.createElement("th",null,r.a.createElement("button",{type:"button",onClick:n.handleManipulate("DELETE",t.concat(a))},"Delete")))}))):e.hasOwnProperty("params")?Object.keys(e.params).map((function(t){return e.params[t]instanceof Array?r.a.createElement("li",null,t,": ",e.params[t].map((function(e){return r.a.createElement("span",null,e," ")}))):r.a.createElement("li",null,t,": ",e.params[t])})):void 0},n.onChange=function(e){e.preventDefault(),n.setState(Object(o.a)({},e.target.name,e.target.value))},n.handleManipulate=function(e,t){return function(a){a.preventDefault(),n.props.handleManipulate(e,t)}},n.state={index:1},n.presentParams=n.presentParams.bind(Object(i.a)(n)),n.onChange=n.onChange.bind(Object(i.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(i.a)(n)),n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"header"},"Model Structure"),r.a.createElement("div",{className:"sheet"},Object.keys(this.props.nets).map((function(t){return r.a.createElement("div",null,r.a.createElement("h3",null,"Model: ",t),r.a.createElement("button",{type:"button",onClick:e.handleManipulate("DELETE",[t])},"Delete"),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Order"),r.a.createElement("th",null,"Type"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Input"),r.a.createElement("th",null,"Parameters"),r.a.createElement("th",null,"Edit"),r.a.createElement("th",null,"Delete")),Object.keys(e.props.nets[t]).map((function(a){var n=e.props.nets[t][a];return r.a.createElement("tr",null,r.a.createElement("th",null,a),r.a.createElement("th",null,n.type),r.a.createElement("th",null,n.name),r.a.createElement("th",{className:"left_align"},n.input.map((function(e){return r.a.createElement("li",null,e)}))),r.a.createElement("th",{className:"left_align"},e.presentParams(n,[t,a])),r.a.createElement("th",null,r.a.createElement("button",{type:"button",onClick:e.handleManipulate("EDIT",[t,a])},"Edit")),r.a.createElement("th",null,r.a.createElement("button",{type:"button",onClick:e.handleManipulate("DELETE",[t,a])},"Delete")))}))))}))))}}]),a}(r.a.Component),d=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).addAnItem=function(e){e.preventDefault(),console.log(e.target.name);var t=n.state[e.target.name];t.push("x"),n.setState(Object(o.a)({},e.target.name,t))},n.changeAnItem=function(e){return function(t){t.preventDefault();var a=n.state[t.target.name];a[e]=t.target.value,n.setState(Object(o.a)({},t.target.name,a))}},n.deleteAnItem=function(e){e.preventDefault();var t=n.state[e.target.name];t.splice(-1,1),n.setState(Object(o.a)({},e.target.name,t))},n.changeAParam=function(e){e.preventDefault();var t=n.state.params;t[e.target.name]=e.target.value,n.setState({param:t})},n.handleSubmit=function(e){e.preventDefault();var t={type:n.state.type,name:n.state.name,input:n.state.input,params:n.state.params};if(n.state.parent_names.length<2)return n.setState({alert:"You have to specify a parent name!"}),0;n.setState({alert:""});var a=n.state.parent_names,r=0,l=n.props.nets;for(var s in l)l.hasOwnProperty(s)&&l[s].name===t.name&&(r=1);1===r?n.setState({alert:"Duplicated name!"}):n.props.handleSubmit("ADD_BLOCK",a,t)},n.onChange=function(e){e.preventDefault(),console.log(e.target.name),n.setState(Object(o.a)({},e.target.name,e.target.value))};var r={};return n.props.hasOwnProperty("params")&&Object.keys(n.props.params).map((function(e){r[e]=n.props.params[e].value})),n.state={parent_names:n.props.parent_names,type:n.props.type,name:n.props.name,input:n.props.input,params:r},n.addAnItem=n.addAnItem.bind(Object(i.a)(n)),n.changeAnItem=n.changeAnItem.bind(Object(i.a)(n)),n.deleteAnItem=n.deleteAnItem.bind(Object(i.a)(n)),n.changeAParam=n.changeAParam.bind(Object(i.a)(n)),n.onChange=n.onChange.bind(Object(i.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(i.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={};this.props.hasOwnProperty("params")&&Object.keys(this.props.params).map((function(a){t[a]=e.props.params[a].value})),this.setState({params:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"content"},r.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},r.a.createElement("label",null,this.props.type),r.a.createElement("table",null,r.a.createElement("tr",{className:"form-group"},r.a.createElement("th",null,r.a.createElement("label",{htmlFor:"name"},"block_name")),r.a.createElement("th",null,r.a.createElement("input",{type:"text",name:"name",id:"name",placeholder:"conv",value:this.state.name,onChange:this.onChange}))),this.state.parent_names.map((function(t,a){return r.a.createElement("tr",{className:"form-group"},r.a.createElement("th",null,r.a.createElement("label",{htmlFor:"parent_names"},"parent_name_",a)),r.a.createElement("th",null,r.a.createElement("input",{type:"text",name:"parent_names",placeholder:t,onChange:e.changeAnItem(a)})))})),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("button",{type:"button",name:"parent_names",onClick:this.addAnItem},"Add a parent name")),r.a.createElement("th",null,this.state.parent_names.length>0&&r.a.createElement("button",{type:"button",name:"parent_names",onClick:this.deleteAnItem},"Delete a parent name"))),this.state.input.map((function(t,a){return r.a.createElement("tr",{className:"form-group"},r.a.createElement("th",null,r.a.createElement("label",{htmlFor:"input"},"input_",a)),r.a.createElement("th",null,r.a.createElement("input",{type:"text",name:"input",placeholder:t,onChange:e.changeAnItem(a)})))})),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("button",{type:"button",name:"input",onClick:this.addAnItem},"Add an input")),r.a.createElement("th",null,this.state.input.length>0&&r.a.createElement("button",{type:"button",name:"input",onClick:this.deleteAnItem},"Delete an input"))),this.props.hasOwnProperty("params")&&Object.keys(this.props.params).map((function(t){return"select"===e.props.params[t].type?r.a.createElement("tr",{className:"form-group"},r.a.createElement("th",null,r.a.createElement("label",{htmlFor:t},t)),r.a.createElement("th",null,r.a.createElement("select",{name:t,id:t,onChange:e.changeAParam},e.props.params[t].value.map((function(e){return r.a.createElement("option",{value:e},e)}))))):r.a.createElement("tr",{className:"form-group"},r.a.createElement("th",null,r.a.createElement("label",{htmlFor:t},t)),r.a.createElement("th",null,r.a.createElement("input",{type:e.props.params[t].type,name:t,id:t,placeholder:e.props.params[t].value,value:e.state.params[t],onChange:e.changeAParam})))}))),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{type:"submit",className:"btn",id:"btn-login"},"Submit"),r.a.createElement("div",{className:"alert"},this.state.alert))))}}]),a}(r.a.Component),v=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).receivedText=function(e){var t=e.target.result,a=JSON.parse(t);r.props.loadNets(a)},r.handleFiles=function(e){var t=e.target.files[0],a=new FileReader;a.onload=r.receivedText,a.readAsText(t)},r.saveHandler=function(){var e=JSON.stringify(r.props.nets),t=new Blob([e],{type:"text/plain;charset=utf-8"});a(24).saveAs(t,"temp.json")},r.handleSelect=function(e){e.preventDefault(),r.props.handleSelect(e.target.value)},r.handleFiles=r.handleFiles.bind(Object(i.a)(r)),r.saveHandler=r.saveHandler.bind(Object(i.a)(r)),r.handleSelect=r.handleSelect.bind(Object(i.a)(r)),r}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"builder_interface"},"model builder - v 0.1",r.a.createElement("div",{className:"builder"},r.a.createElement("div",{className:"left_panel"},r.a.createElement(h,Object.assign({},this.props,{containerRef:function(t){return e.current=t}})),r.a.createElement("input",{type:"file",id:"files",name:"file",onChange:this.handleFiles}),r.a.createElement("input",{type:"button",id:"export",value:"save",onClick:this.saveHandler})),r.a.createElement("div",{className:"building_block"},r.a.createElement("div",{className:"content"},r.a.createElement("select",{name:"type",onChange:this.handleSelect},r.a.createElement("option",{value:"conv"},"Convolution"),r.a.createElement("option",{value:"deconv"},"Deconvolution"),r.a.createElement("option",{value:"linear"},"Linear"),r.a.createElement("option",{value:"noise"},"Noise"),r.a.createElement("option",{value:"AdaIN"},"AdaIN"),r.a.createElement("option",{value:"const"},"Const"),r.a.createElement("option",{value:"reshape"},"Reshape"),r.a.createElement("option",{value:"reparameterize"},"Reparameterize"),r.a.createElement("option",{value:"concat"},"Concat"),r.a.createElement("option",{value:"normalization"},"Normalization"),r.a.createElement("option",{value:"activation"},"Activation"),r.a.createElement("option",{value:"sequential"},"Sequential"))),r.a.createElement(d,Object.assign({key:this.props.parent_names},this.props,{containerRef:function(t){return e.current=t}})))))}}]),n}(r.a.Component),b=a(9);function E(e){this.current=e}var y=Object(b.b)((function(e){return{type:e.type,nets:e.nets,input:e.input,parent_names:e.parent_names,name:e.name,params:e.params}}),(function(e){return{handleSubmit:function(t,a,n){e({type:t,parent_names:a,content:n})},loadNets:function(t){e({type:"LOAD",content:t})},handleSelect:function(t){e({type:"SWITCH",block_type:t})},handleManipulate:function(t,a){e({type:t,parent_names:a})},containerRef:E}}))(v),f=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(y,null))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var g=a(7),O={conv:{num_in:{type:"number",value:1},num_out:{type:"number",value:1},kernel_size:{type:"text",value:3},stride:{type:"text",value:1},padding:{type:"text",value:1},dilation:{type:"text",value:1},bias:{type:"text",value:1}},deconv:{num_in:{type:"number",value:1},num_out:{type:"number",value:1},kernel_size:{type:"text",value:3},stride:{type:"text",value:1},padding:{type:"text",value:1},dilation:{type:"text",value:1},output_padding:{type:"text",value:1}},linear:{num_in:{type:"number",value:1},num_out:{type:"number",value:1}},noise:{num_in:{type:"number",value:1}},AdaIN:{num_in:{type:"number",value:1},num_out:{type:"number",value:1}},const:{num_in:{type:"number",value:1},img_size:{type:"text",value:[4,4]}},reshape:{depth:{type:"text",value:[-1,1,1,1]}},concat:{axis:{type:"number",value:1}},normalization:{type:{type:"select",value:["BatchNorm2d","PixelNorm"]}},activation:{type:{type:"select",value:["LeakyReLU","Sigmoid","ReLU"]}}};function j(e,t){var a=Object.assign({},e);return a.type=t,O.hasOwnProperty(t)?a.params=O[t]:a.params={},a}function _(e,t){var a=Object.assign({},e),n=a.nets;if(t.length<2)return a;for(var r=0;r<2;r++){if(!n.hasOwnProperty(t[r]))return a;n=n[t[r]]}if(t.length>2)for(var l=2;l<t.length;l++)n.hasOwnProperty("params")&&n.params.hasOwnProperty(t[l])&&(n=n.params[t[l]]);var s={input:n.hasOwnProperty("input")?n.input:[],parent_names:n.hasOwnProperty("parent_names")?n.parent_names:t,name:n.hasOwnProperty("name")?n.name:"x"};return n.hasOwnProperty("type")&&(s.type=n.type),n.hasOwnProperty("params")&&(s.params={}),"sequential"!==n.type&&Object.keys(O[n.type]).map((function(e){s.params[e]={type:O[n.type][e].type,value:n.params[e]}})),Object.assign(a,s),a}function k(e,t,a){return console.log(t),e.hasOwnProperty(t[0])||(e[t[0]]={}),2===t.length?e[t[0]][t[1]]=a:t.length>2&&(e[t[0]].hasOwnProperty(t[1])||(e[t[0]][t[1]]={params:{}}),e[t[0]][t[1]].params=function(e,t,a){return 1===t.length?e[t[0]]=a:t.length>1&&(e.hasOwnProperty(t[0])||(e[t[0]]={params:{}}),e[t[0]].params=k(e[t[0]].params,t.slice(1),a)),console.log(e),e}(e[t[0]][t[1]].params,t.slice(2),a)),e}function C(e,t,a){var n=Object.assign({},e.nets);n=k(n,t,function(e){var t=Object.assign({},e);return t.hasOwnProperty("params")&&Object.keys(t.params).map((function(e){if("text"===O[t.type][e].type&&"string"==typeof t.params[e])if(-1===t.params[e].indexOf(","))t.params[e]=parseInt(t.params[e]);else{for(var a=t.params[e].split(","),n=[],r=0;r<a.length;r++)n.push(parseInt(a[r]));t.params[e]=n}})),t}(a));var r=Object.assign({},e);return r.nets=n,Object.assign(r,{nets:n})}function N(e,t){return 1===t.length&&delete e[t[0]],2===t.length?delete e[t[0]][t[1]]:t.length>2&&(e[t[0]][t[1]].params=function e(t,a){return 1===a.length?delete t[a[0]]:a.length>1&&(t[a[0]].params=e(t[a[0]].params,a.slice(1))),t}(e[t[0]][t[1]].params,t.slice(2))),e}function S(e,t){var a=Object.assign({},e.nets);a=N(a,t);var n=Object.assign({},e);return Object.assign(n,{nets:a})}function A(e,t){var a=Object.assign({},e);return a.nets=t,a}var D=a(17),w=Object(g.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{nets:{E:{1:{type:"conv",name:"conv",input:["x"],params:{num_in:64,num_out:128,kernel_size:7,stride:4,padding:3,dilation:1,bias:0}}}},type:"conv",input:[],parent_names:["E","1"],name:"x",params:O.conv},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_BLOCK":return C(e,t.parent_names,t.content);case"LOAD":return A(e,t.content);case"SWITCH":return j(e,t.block_type);case"EDIT":return _(e,t.parent_names);case"DELETE":return S(e,t.parent_names);default:return e}}),Object(g.c)(Object(g.a)(D.a)));s.a.render(r.a.createElement(b.a,{store:w},r.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[18,1,2]]]);
//# sourceMappingURL=main.03fc89c4.chunk.js.map